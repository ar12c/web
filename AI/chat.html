<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chat OLM | The Digital Gazette</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <!-- Newspaper Serifs + High-end Sans + Chat UI Sans (Inter) -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,900;1,400;1,900&family=Libre+Franklin:wght@400;700;900&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://kit.fontawesome.com/40440288c0.js" crossorigin="anonymous"></script>

  <script>
    tailwind.config = {
      darkMode: 'media',
      theme: {
        extend: {
          fontFamily: {
            inter: ['Inter', 'sans-serif'],
            serif: ['Playfair Display', 'serif'],
            sans: ['Libre Franklin', 'sans-serif'],
          },
          colors: {
            paper: '#f9f7f2',
            ink: '#1a1a1a',
            'accent-blue': '#1e3a8a',
            'dark-paper': '#121212',
            'dark-ink': '#e5e7eb',
          }
        }
      }
    }
  </script>

  <style>
    /* Newspaper Paper Effect */
    .newspaper-texture {
      background-image: url("data:image/svg+xml,%3Csvg width='4' height='4' viewBox='0 0 4 4' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='1' cy='1' r='0.5' fill='%23000' fill-opacity='0.03'/%3E%3C/svg%3E");
    }
    @media (prefers-color-scheme: dark) {
      .newspaper-texture {
        background-image: url("data:image/svg+xml,%3Csvg width='4' height='4' viewBox='0 0 4 4' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='1' cy='1' r='0.5' fill='%23fff' fill-opacity='0.05'/%3E%3C/svg%3E");
      }
    }

    .chat-scroll {
      scrollbar-width: thin;
      scrollbar-color: #1a1a1a transparent;
    }

    /* Gazette Component Styling */
    .gazette-border {
      border: 3px solid #1a1a1a;
    }
    @media (prefers-color-scheme: dark) {
      .gazette-border { border-color: #3f3f46; }
    }

    .btn-newspaper {
      background: #f9f7f2; 
      border: 3px solid #1a1a1a;
      transition: all 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);
    }
    @media (prefers-color-scheme: dark) {
      .btn-newspaper { background: #121212; border-color: #3f3f46; color: #e5e7eb; }
    }
    .btn-newspaper:hover {
      background: #1e3a8a !important;
      border-color: #1e3a8a;
      color: #ffffff !important;
      transform: translateY(-2px);
      box-shadow: 4px 4px 0px rgba(0,0,0,0.15);
    }

    /* Message Bubbles as News Items */
    .user-message-row {
      border-left: 4px solid #1e3a8a;
      padding-left: 1rem;
      margin-bottom: 2rem;
    }
    .ai-message-row {
      border-left: 4px solid #1a1a1a;
      padding-left: 1rem;
      margin-bottom: 2rem;
    }
    @media (prefers-color-scheme: dark) {
      .ai-message-row { border-left-color: #e5e7eb; }
    }

    /* Modal Styling */
    .modal-paper {
      background-color: #f9f7f2;
      border: 8px double #1a1a1a;
    }
    @media (prefers-color-scheme: dark) {
      .modal-paper { background-color: #121212; border-color: #3f3f46; }
    }

    /* Dropdown Transitions to match chat.js */
    #okemo-dropdown {
      transform-origin: top;
      transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
    }

    #input-dropdown {
      transform-origin: bottom;
      transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
    }

    .blinking-cursor {
      font-size: 1.1em;
      font-weight: 700;
      animation: blink 0.7s infinite step-end;
      display: inline-block;
      vertical-align: middle;
      margin-left: 2px;
    }
    @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

    html { scroll-behavior: smooth; }
    ::selection { background: #1e3a8a; color: white; }
  </style>
</head>
<body class="bg-paper dark:bg-dark-paper text-ink dark:text-dark-ink font-sans newspaper-texture transition-colors duration-500 min-h-screen flex flex-col overflow-x-hidden">

  <!-- TOP MARGIN NAVIGATION -->
  <header class="w-full max-w-2xl mx-auto px-6 pt-8 z-50">
    <div class="flex justify-between items-center mb-4">
      <nav>
        <a href="OkemoLLM.html" class="inline-flex items-center gap-2 text-[10px] font-black uppercase tracking-[0.2em] hover:text-accent-blue transition-colors group">
          <i class="fa-solid fa-arrow-left transition-transform group-hover:-translate-x-1"></i>
          <span>Back</span>
        </a>
      </nav>
      
      <a href="#" id="new-chat-link-header" class="text-[10px] font-black uppercase tracking-widest px-3 py-1 border border-ink/20 dark:border-white/20 hover:bg-ink hover:text-paper dark:hover:bg-white dark:hover:text-ink transition-all">
        New Session
      </a>
    </div>

    <div class="flex justify-between items-end border-b-2 border-ink dark:border-zinc-700 pb-2 text-[10px] font-black uppercase tracking-[0.3em] relative">
      <div class="flex items-center gap-2 relative">
        <!-- Combined title and toggle for model switching -->
        <div id="menu-toggle" class="cursor-pointer hover:text-accent-blue flex items-center gap-1">
          <span id="okemo-title">OLM <span id="model-display-number">2</span></span>
          <i class="fa-solid fa-caret-down text-[8px]" id="menu-icon"></i>
        </div>
        
        <!-- Model Dropdown styled as Gazette Menu -->
        <div id="okemo-dropdown" class="absolute left-0 top-full mt-2 w-48 bg-paper dark:bg-dark-paper border-2 border-ink dark:border-zinc-700 shadow-xl z-50 p-1 hidden opacity-0 scale-y-0 origin-top">
          <a href="#" id="model-select-base" data-model-id="ar12c/okemo2" data-model-name="OLM 1" class="block px-3 py-2 text-[10px] font-black uppercase tracking-wider hover:bg-ink hover:text-paper dark:hover:bg-white dark:hover:text-ink transition-colors">OLM 1</a>
          <a href="#" id="model-select-pro" data-model-id="ar12c/okemollm" data-model-name="OLM 2" class="block px-3 py-2 text-[10px] font-black uppercase tracking-wider hover:bg-ink hover:text-paper dark:hover:bg-white dark:hover:text-ink transition-colors">OLM 2</a>
          <div class="border-t border-ink/10 dark:border-white/10 my-1"></div>
          <a href="#" id="show-update-notes" class="block px-3 py-2 text-[10px] font-black uppercase tracking-wider hover:bg-ink hover:text-paper dark:hover:bg-white dark:hover:text-ink transition-colors italic">Update Notes</a>
        </div>
      </div>
      <div id="date-stamp" class="italic italic">JANUARY 6, 2026</div>
    </div>
  </header>

  <!-- CHAT AREA -->
  <main class="flex-1 flex flex-col w-full max-w-2xl mx-auto px-6 py-10 relative">
    
    <div id="empty-chat-prompt" class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-center w-full px-10 pointer-events-none transition-opacity duration-500">
      <h2 class="font-serif text-4xl md:text-5xl font-black uppercase tracking-tighter leading-none mb-4">
        How can I help you <br><span class="italic text-accent-blue">today?</span>
      </h2>
    </div>

    <div id="okemo-chat" class="chat-scroll flex-1 overflow-y-auto space-y-8 pb-32">
      <!-- Messages injected via JS -->
    </div>
  </main>

  <!-- STICKY INPUT BAR -->
  <div class="fixed bottom-0 left-0 right-0 bg-paper dark:bg-dark-paper border-t-[8px] border-double border-ink dark:border-zinc-800 py-6 px-6 z-40 transition-colors">
    <div class="max-w-xl mx-auto relative group">
      
      <div id="okemo-status" class="absolute -top-8 left-0 text-[9px] font-black uppercase tracking-widest opacity-40 italic"></div>
      
      <!-- Stabilized Input Container (Removed focus-within transform) -->
      <div class="gazette-border bg-paper dark:bg-zinc-900 shadow-[8px_8px_0px_#1e3a8a] p-2 flex flex-col gap-2">
        
        <div class="flex items-center gap-2 relative">
          <!-- Input Dropdown (Removed Photo/File options) -->
          <div id="input-dropdown" class="absolute left-0 bottom-full mb-4 w-48 bg-paper dark:bg-dark-paper border-2 border-ink dark:border-zinc-700 shadow-xl p-1 hidden opacity-0 scale-y-0 origin-bottom-left">
            <button id="web-search-option" class="w-full text-left px-3 py-2 text-[10px] font-black uppercase tracking-wider hover:bg-ink hover:text-paper dark:hover:bg-white dark:hover:text-ink transition-colors">Web Search</button>
          </div>

          <button id="plus-menu-toggle" class="w-10 h-10 flex items-center justify-center hover:text-accent-blue transition-colors">
            <i id="plus-icon" class="fa-solid fa-plus text-lg"></i>
          </button>
          
          <textarea
            id="okemo-input"
            placeholder="ENTER PROMPT..."
            rows="1"
            class="flex-1 py-3 text-sm md:text-base font-bold uppercase tracking-widest outline-none bg-transparent text-ink dark:text-white placeholder:text-ink/20 dark:placeholder:text-white/20 resize-none max-h-40 overflow-hidden"
          ></textarea>
          
          <button id="okemo-send" class="btn-newspaper w-12 h-12 flex items-center justify-center">
            <i class="fa-solid fa-arrow-right text-sm"></i>
          </button>
        </div>
      </div>

      <div class="flex justify-between items-center mt-4">
        <p class="text-[8px] font-black uppercase tracking-widest opacity-40 italic">
          * Beta Protocol 0.2.1 // Errors possible *
        </p>
      </div>
    </div>
  </div>

  <!-- MODALS -->
  <!-- Disclaimer Notice -->
  <div id="disclaimer-modal" class="fixed inset-0 bg-ink/60 backdrop-blur-sm flex items-center justify-center z-[60] hidden opacity-0 transition-opacity">
    <div class="modal-paper p-8 max-w-md w-full mx-4 shadow-[12px_12px_0px_#1e3a8a]">
      <h3 class="font-serif text-3xl font-black uppercase italic mb-6">Disclaimer</h3>
      <div class="text-[11px] font-bold uppercase tracking-tight space-y-4 mb-8 leading-relaxed">
        <p>OLM generation is experimental. Content may be inaccurate or biased.</p>
        <p class="text-accent-blue">Your inputs are logged for refinement. By accepting, you agree to public beta terms.</p>
      </div>
      <div class="flex gap-4">
        <button id="disclaimer-agree" class="btn-newspaper flex-1 py-3 font-black uppercase text-[10px]">I Accept</button>
        <a href="index.html" class="btn-newspaper flex-1 py-3 font-black uppercase text-[10px] text-center">Decline</a>
      </div>
    </div>
  </div>

  <!-- Update Notes Notice -->
  <div id="update-notes-modal" class="fixed inset-0 bg-ink/60 backdrop-blur-sm flex items-center justify-center z-[60] hidden opacity-0 transition-opacity">
    <div class="modal-paper p-8 max-w-md w-full mx-4 shadow-[12px_12px_0px_#1e3a8a]">
      <h3 class="font-serif text-3xl font-black uppercase italic mb-6">Update Notes</h3>
      <div class="text-[11px] font-bold uppercase tracking-tight space-y-4 mb-8 leading-relaxed">
        <p class="border-b border-ink/10 pb-2">Version 0.2.0 - Stability Fixes</p>
        <ul class="list-disc list-inside space-y-1">
          <li>Backend Tensor Repetition Errors Resolved.</li>
          <li>Manual Training Refactor implemented.</li>
          <li>Persona adjustment for comprehensive output.</li>
        </ul>
      </div>
      <button id="update-notes-close" class="btn-newspaper w-full py-3 font-black uppercase text-[10px]">Got it</button>
    </div>
  </div>

  <!-- Bad Feedback Notice -->
  <div id="bad-feedback-modal" class="fixed inset-0 bg-ink/60 backdrop-blur-sm flex items-center justify-center z-[60] hidden opacity-0 transition-opacity">
    <div class="modal-paper p-8 max-w-md w-full mx-4 shadow-[12px_12px_0px_#1e3a8a]">
      <h3 class="font-serif text-3xl font-black uppercase italic mb-6">Feedback</h3>
      <p class="text-[11px] font-black uppercase mb-4 tracking-widest opacity-60">What should the response have been?</p>
      <textarea id="bad-feedback-input" class="w-full h-32 bg-paper dark:bg-zinc-900 border-2 border-ink dark:border-zinc-700 p-3 mb-6 outline-none font-bold uppercase text-[10px] tracking-widest" placeholder="ENTER CORRECT RESPONSE..."></textarea>
      <div class="flex gap-4">
        <button id="cancel-bad-feedback" class="btn-newspaper flex-1 py-3 font-black uppercase text-[10px]">Cancel</button>
        <button id="submit-bad-feedback" class="btn-newspaper flex-1 py-3 font-black uppercase text-[10px]">Submit</button>
      </div>
    </div>
  </div>

  <script type="module" src="chat.js"></script>
</body>
</html>