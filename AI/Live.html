<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OLM-2.1B Live Telemetry</title>
  <link rel="icon" type="image/x-icon" href="https://avatars.githubusercontent.com/u/179893130?v=4">
  
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
  <script src="https://unpkg.com/recharts/umd/Recharts.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,900;1,400;1,900&family=Libre+Franklin:wght@400;700;900&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://kit.fontawesome.com/40440288c0.js" crossorigin="anonymous"></script>

  <script>
    tailwind.config = {
      darkMode: 'media',
      theme: {
        extend: {
          fontFamily: {
            inter: ['Inter', 'sans-serif'],
            serif: ['Playfair Display', 'serif'],
            sans: ['Libre Franklin', 'sans-serif'],
          },
          colors: {
            paper: '#f9f7f2',
            ink: '#1a1a1a',
            'accent-blue': '#1e3a8a',
            'dark-paper': '#121212',
            'dark-ink': '#e5e7eb',
          }
        }
      }
    }
  </script>

  <style>
    .newspaper-texture {
      background-image: url("data:image/svg+xml,%3Csvg width='4' height='4' viewBox='0 0 4 4' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='1' cy='1' r='0.5' fill='%23000' fill-opacity='0.03'/%3E%3C/svg%3E");
    }
    @media (prefers-color-scheme: dark) {
      .newspaper-texture {
        background-image: url("data:image/svg+xml,%3Csvg width='4' height='4' viewBox='0 0 4 4' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='1' cy='1' r='0.5' fill='%23fff' fill-opacity='0.05'/%3E%3C/svg%3E");
      }
    }
    
    @keyframes revealBlur {
      0% { opacity: 0; transform: translateY(15px); filter: blur(10px); }
      100% { opacity: 1; transform: translateY(0); filter: blur(0); }
    }
    .animate-word {
      display: inline-block;
      animation: revealBlur 0.6s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
    }

    .chart-container {
      height: 300px;
      width: 100%;
      filter: grayscale(1) contrast(1.2);
      transition: filter 0.3s ease;
    }
    .chart-container:hover {
      filter: grayscale(0) contrast(1);
    }

    .liquid-glass-smooth {
      border: 3px solid #1a1a1a;
      background: #f9f7f2; 
      transition: all 0.4s cubic-bezier(0.68, -0.6, 0.32, 1.6);
    }
    
    @media (prefers-color-scheme: dark) {
      .liquid-glass-smooth { background: #121212; border-color: #3f3f46; color: #e5e7eb; }
    }

    .liquid-glass-smooth:hover {
      border-radius: 100px;
      background: #1e3a8a !important;
      border-color: #3b82f6;
      transform: translateY(-8px) scale(1.05);
      color: white !important;
    }
  </style>
</head>
<body class="bg-paper dark:bg-dark-paper text-ink dark:text-dark-ink font-sans newspaper-texture transition-colors duration-500 overflow-x-hidden">

  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;
    const { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, AreaChart, Area, Defs, LinearGradient, Stop } = Recharts;

    const DATABASE_URL = "https://olmlive-4a343-default-rtdb.firebaseio.com/stats.json";

    const App = () => {
      const [stats, setStats] = useState(null);
      const [history, setHistory] = useState([]);
      const [isLive, setIsLive] = useState(false);
      const [error, setError] = useState(false);

      const fetchData = async () => {
        try {
          const response = await fetch(DATABASE_URL);
          const data = await response.json();
          
          if (data) {
            setStats(data);
            setIsLive(true);
            setError(false);
            setHistory(prev => {
              const newPoint = { 
                time: new Date().toLocaleTimeString('en-GB', { hour: '2-digit', minute: '2-digit', second: '2-digit' }), 
                loss: data.loss, 
                avg: data.moving_avg_loss,
                vram: data.vram_gb 
              };
              return [...prev, newPoint].slice(-20);
            });
          }
        } catch (err) {
          setError(true);
          setIsLive(false);
        }
      };

      useEffect(() => {
        fetchData();
        const interval = setInterval(fetchData, 5000);
        return () => clearInterval(interval);
      }, []);

      return (
        <div className="max-w-screen-2xl mx-auto px-4 md:px-16 pt-6 md:pt-8">
          {/* Header */}
          <header>
            <nav className="mb-4 md:mb-6">
              <a href="#" className="inline-flex items-center gap-2 text-[10px] font-black uppercase tracking-[0.2em] hover:text-accent-blue transition-colors group">
                <i className="fa-solid fa-arrow-left transition-transform group-hover:-translate-x-1"></i>
                <span>Network</span>
              </a>
            </nav>

            <div className="flex justify-between items-end border-b-2 border-ink dark:border-zinc-700 pb-2 text-[10px] md:text-xs font-black uppercase tracking-[0.3em]">
              <div className="flex gap-4 md:gap-6"><span>Vol. 03</span><span>Issue 2.1B</span></div>
              <div className="text-right italic uppercase">{new Date().toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' })}</div>
            </div>
            
            <div className="py-6 md:py-10 border-b-[8px] md:border-b-[12px] border-double border-ink dark:border-zinc-800 flex items-center justify-between gap-4">
              <div className="flex items-center gap-4 md:gap-6">
                <img src="https://avatars.githubusercontent.com/u/179893130?v=4" className="w-12 h-12 md:w-20 md:h-20 grayscale border-2 border-ink dark:border-zinc-700 p-1 bg-white"/>
                <div className="leading-none">
                  <h1 className="font-serif text-5xl md:text-9xl font-black uppercase tracking-tighter animate-word">OLM</h1>
                  <p className="text-[9px] md:text-[11px] font-black uppercase tracking-[0.4em] ml-1 opacity-50">Gemma-2B Architecture</p>
                </div>
              </div>

              <div className="flex items-center gap-1.5 self-start md:self-center mt-2 md:mt-0">
                <div className={`w-2 h-2 rounded-full ${isLive ? 'bg-emerald-500 animate-pulse shadow-[0_0_8px_rgba(16,185,129,0.5)]' : 'bg-red-500'}`}></div>
                <span className="text-[7px] md:text-[9px] font-black uppercase tracking-widest opacity-60">
                  {isLive ? 'Feed Connected' : 'Feed Disconnected'}
                </span>
              </div>
            </div>
          </header>

          <main className="py-6 md:py-10">
            {/* Hero Section */}
            <section className="grid grid-cols-1 lg:grid-cols-3 border-b-2 border-ink/10 dark:border-zinc-800 mb-8 md:mb-10">
              <div className="lg:col-span-2 py-6 md:py-10 lg:pr-12 text-center lg:text-left flex flex-col items-center lg:items-start">
                <span className="text-[9px] md:text-[10px] font-black uppercase tracking-widest bg-ink text-paper dark:bg-zinc-700 px-2 py-1 inline-block mb-4">CURRENT INSTANT LOSS</span>
                <h2 className="font-serif text-[clamp(3.5rem,15vw,10vw)] lg:text-[clamp(4rem,12vw,12vw)] font-black italic leading-[0.8] tracking-tighter mb-6 md:mb-20 animate-word">
                  {stats?.loss?.toFixed(4) || "0.0000"}
                </h2>
                <div className="max-w-2xl">
                  <p className="text-lg md:text-2xl font-black leading-tight tracking-tight uppercase">
                    AN OKEMO ENGINE BUILT ON THE PRINCIPLES OF <br/> 
                    <span className="bg-ink dark:bg-zinc-700 text-paper dark:text-white px-2">THE 3Es</span>: EXPRESSIVE, EXPEDITIOUS, AND ECONOMICAL.
                  </p>
                </div>
              </div>
              
              <div className="py-8 md:py-10 lg:pl-12 lg:border-l border-ink/10 dark:border-zinc-800 flex flex-col justify-center items-center lg:items-start text-center lg:text-left">
                <div className="mb-8">
                   <a href="https://voidai.app" target="_blank" className="liquid-glass-smooth inline-flex items-center gap-3 p-2">
                    <img src="https://voidai.app/voidai.png" className="w-10 h-10 md:w-14 md:h-14 object-contain"></img>
                    <div className="flex flex-col pr-4 text-left">
                      <span className="text-[7px] font-bold uppercase opacity-50">SPONSORED BY</span>
                      <span className="text-sm md:text-lg font-black uppercase tracking-widest font-serif leading-none">voidai.app</span>
                    </div>
                   </a>
                </div>
                <span className="text-[9px] font-black uppercase tracking-widest opacity-40 mb-2 block">Current Activity</span>
                <p className="font-serif text-xl md:text-2xl font-black italic leading-none uppercase">
                  {isLive ? 'Pre-training\nIn Progress' : 'Pre-training\nOffline'}
                </p>
              </div>
            </section>

            {/* Stats Bar */}
            <section className="border-y-2 border-ink dark:border-zinc-800 mb-10">
              <div className="grid grid-cols-2 md:grid-cols-4 divide-x divide-ink/10 dark:divide-white/10">
                <StatBox label="Tokens" value={stats?.token_display?.toLocaleString() || "0"} icon="fa-chart-line" />
                <StatBox label="Avg Loss" value={stats?.moving_avg_loss?.toFixed(4) || "0.0000"} icon="fa-wave-square" />
                <StatBox label="VRAM" value={(stats?.vram_gb?.toFixed(2) || "0.00") + " GB"} icon="fa-database" />
                <StatBox label="Elapsed" value={Math.floor((stats?.time_elapsed || 0) / 3600) + " Hours"} icon="fa-clock" />
              </div>
            </section>

            {/* Charts Section */}
            <section className="grid grid-cols-1 lg:grid-cols-2 gap-12 mb-10">
              <div className="border-t-2 border-ink pt-4">
                <h3 className="text-xs font-black uppercase tracking-[0.3em] mb-6 flex items-center gap-2">
                  <span className="w-2 h-2 bg-accent-blue rounded-full"></span> Convergence Metric
                </h3>
                <div className="chart-container">
                  <ResponsiveContainer>
                    <AreaChart data={history}>
                      <CartesianGrid strokeDasharray="3 3" vertical={false} stroke="#ccc" />
                      <XAxis dataKey="time" hide />
                      <YAxis domain={['auto', 'auto']} fontSize={10} tickLine={false} axisLine={false} />
                      <Tooltip contentStyle={{background: '#f9f7f2', border: '2px solid #1a1a1a', fontFamily: 'serif'}} />
                      <Area type="monotone" dataKey="avg" stroke="#1a1a1a" fill="#1e3a8a" fillOpacity={0.1} strokeWidth={2} />
                    </AreaChart>
                  </ResponsiveContainer>
                </div>
              </div>

              <div className="border-t-2 border-ink pt-4">
                <h3 className="text-xs font-black uppercase tracking-[0.3em] mb-6 flex items-center gap-2">
                  <span className="w-2 h-2 bg-purple-500 rounded-full"></span> VRAM Allocation
                </h3>
                <div className="chart-container">
                  <ResponsiveContainer>
                    <LineChart data={history}>
                      <CartesianGrid strokeDasharray="3 3" vertical={false} stroke="#ccc" />
                      <XAxis dataKey="time" hide />
                      <YAxis domain={[0, 24]} fontSize={10} tickLine={false} axisLine={false} />
                      <Tooltip contentStyle={{background: '#f9f7f2', border: '2px solid #1a1a1a', fontFamily: 'serif'}} />
                      <Line type="stepAfter" dataKey="vram" stroke="#1a1a1a" strokeWidth={2} dot={false} />
                    </LineChart>
                  </ResponsiveContainer>
                </div>
              </div>
            </section>
          </main>

          <footer className="border-t-[8px] border-double border-ink dark:border-zinc-800 py-8 flex flex-col md:flex-row justify-between items-center text-[10px] font-black uppercase tracking-[0.3em] opacity-40">
            <div>&copy; 2026 OKEMO CODE</div>
            <div className="flex gap-6">
              <span>Optimizer: PagedAdamW8bit</span>
              <span>Precision: BFloat16</span>
            </div>
          </footer>
        </div>
      );
    };

    const StatBox = ({ label, value, icon }) => (
      <div className="p-6 md:p-8 hover:bg-ink/5 transition-colors">
        <div className="flex items-center gap-3 mb-4">
          <i className={`fa-solid ${icon} text-xs opacity-60`}></i>
          <span className="text-[8px] md:text-[10px] font-black uppercase tracking-[0.2em] opacity-60">{label}</span>
        </div>
        <div className="font-serif text-2xl md:text-3xl font-black italic tracking-tighter">{value}</div>
      </div>
    );

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>