<!DOCTYPE html>
<html lang="en" class="h-full">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Research - OkemoAI</title>
    <link rel="icon" type="image/x-icon" href="https://avatars.githubusercontent.com/u/179893130?v=4">


    <script src="https://kit.fontawesome.com/40440288c0.js" crossorigin="anonymous"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'media',
            theme: {
                extend: {
                    colors: {
                        moss: '#5F634F',
                        sage: '#BFD7B5',
                        paper: '#F9F9F7',
                        obsidian: '#0C0D0B',
                    },
                    fontFamily: {
                        serif: ['Century', '"Century Schoolbook"', 'serif'],
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #F9F9F7;
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            color: #5F634F;
        }

        .serif-text {
            font-family: 'Century', 'Century Schoolbook', serif;
        }

        .mesh-gradient {
            background-color: #F9F9F7;
            background-image:
                radial-gradient(at 10% 20%, rgba(191, 215, 181, 0.3) 0px, transparent 50%),
                radial-gradient(at 90% 10%, rgba(95, 99, 79, 0.1) 0px, transparent 50%),
                radial-gradient(at 50% 90%, rgba(191, 215, 181, 0.2) 0px, transparent 50%);
            background-attachment: fixed;
        }

        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }

        @media (prefers-color-scheme: dark) {
            body {
                background-color: #0C0D0B;
                color: #BFD7B5;
            }

            .mesh-gradient {
                background-color: #0C0D0B;
                background-image:
                    radial-gradient(at 10% 20%, rgba(191, 215, 181, 0.1) 0px, transparent 50%),
                    radial-gradient(at 90% 10%, rgba(95, 99, 79, 0.1) 0px, transparent 50%),
                    radial-gradient(at 50% 90%, rgba(191, 215, 181, 0.05) 0px, transparent 50%);
            }

            #reader-modal {
                background-color: rgba(0, 0, 0, 0.6);
            }

            .modal-content {
                background-color: #0C0D0B;
                border-color: rgba(191, 215, 181, 0.1);
            }
        }

        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }


        .rich-content h1 {
            font-size: 2.25rem;
            font-weight: 800;
            margin-bottom: 1.5rem;
            line-height: 1.2;
        }

        .rich-content h2 {
            font-size: 1.75rem;
            font-weight: 700;
            margin-top: 2rem;
            margin-bottom: 1rem;
            line-height: 1.3;
        }

        .rich-content p {
            margin-bottom: 1.25rem;
            line-height: 1.8;
            color: inherit;
        }

        .rich-content b,
        .rich-content strong {
            font-weight: 800;
        }

        .animate-fade-in {
            animation: fadeIn 0.6s ease-out forwards;
            opacity: 0;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(12px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        #reader-modal {
            display: none;
            opacity: 0;
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
            pointer-events: none;
        }

        #reader-modal.active {
            opacity: 1;
            pointer-events: auto;
        }

        .modal-content {
            transform: translateY(40px) scale(0.98);
            transition: all 0.7s cubic-bezier(0.16, 1, 0.3, 1);
        }

        #reader-modal.active .modal-content {
            transform: translateY(0) scale(1);
        }
    </style>
</head>

<body
    class="mesh-gradient h-full overflow-y-auto no-scrollbar selection:bg-blue-100 dark:selection:bg-blue-900 selection:text-black dark:selection:text-white">

    <div class="flex min-h-screen">

        <aside
            class="w-[200px] flex-shrink-0 p-8 flex flex-col fixed h-full z-20 border-r border-gray-200/40 dark:border-white/5 bg-white/20 dark:bg-black/20 backdrop-blur-sm">
            <div class="mb-12">
                <a href="../okemoai.html"
                    class="flex items-center gap-3 font-bold text-xl tracking-tight text-gray-900 dark:text-white">
                    <img src="../src/OLM.svg" alt="OLM Logo" class="w-7 h-7 dark:invert" />
                    OkemoAI
                </a>
            </div>
            <nav class="flex flex-col gap-6 text-gray-400 dark:text-gray-500 font-medium text-sm">
                <a href="#"
                    class="hover:text-black dark:hover:text-white transition-colors text-black dark:text-white font-semibold">Research</a>
                <a href="tos.html" class="hover:text-black dark:hover:text-white transition-colors">Terms</a>
                <a href="privacy.html" class="hover:text-black dark:hover:text-white transition-colors">Privacy</a>
            </nav>
            <div class="mt-auto">
                <p class="text-xs text-gray-400 dark:text-gray-600 font-medium">Â© 2026 OkemoAI</p>
            </div>
        </aside>


        <main class="flex-1 ml-[200px] p-8 md:p-12 lg:p-20 pb-40">
            <header class="max-w-4xl mx-auto mb-16 flex justify-between items-center text-gray-900 dark:text-white">
                <h1 class="text-4xl md:text-5xl font-black tracking-tighter">Research</h1>
                <div class="flex items-center gap-4">
                    <a href="chat.html"
                        class="px-5 py-2 rounded-full border border-gray-300 dark:border-white/10 font-semibold text-sm hover:bg-black hover:text-white dark:hover:bg-white dark:hover:text-black hover:border-black dark:hover:border-white transition-all">
                        Launch Polaris <i class="fa-solid fa-arrow-right ml-1 opacity-70"></i>
                    </a>
                </div>
            </header>

            <div class="max-w-4xl mx-auto">

                <div class="mb-12 animate-fade-in" style="animation-delay: 0.1s">
                    <div class="relative group">
                        <div
                            class="absolute inset-y-0 left-6 flex items-center pointer-events-none text-moss/30 dark:text-sage/30 group-focus-within:text-moss dark:group-focus-within:text-sage transition-colors">
                            <i class="fa-solid fa-magnifying-glass text-lg"></i>
                        </div>
                        <input type="text" id="article-search" placeholder="Search papers, updates, and architecture..."
                            class="w-full bg-paper/70 dark:bg-obsidian/40 backdrop-blur-xl border border-moss/10 dark:border-sage/10 shadow-sm rounded-full py-5 pl-16 pr-8 outline-none transition-all text-lg font-medium placeholder-stone-400 dark:placeholder-stone-600 text-moss dark:text-sage focus:shadow-md dark:focus:shadow-none"
                            oninput="handleSearch()">
                    </div>
                </div>


                <div class="flex flex-wrap gap-3 mb-16 animate-fade-in" style="animation-delay: 0.2s" id="tag-cloud">

                </div>


                <div id="article-feed" class="flex flex-col gap-8">

                </div>
            </div>
        </main>
    </div>


    <div id="reader-modal"
        class="fixed inset-0 z-[100] flex items-center justify-center p-4 md:p-12 backdrop-blur-2xl bg-white/40">
        <div
            class="modal-content w-full max-w-5xl max-h-[90vh] bg-white/95 backdrop-blur-3xl rounded-[40px] shadow-[0_32px_80px_rgba(0,0,0,0.1)] overflow-hidden flex flex-col relative border border-white">
            <button onclick="closeReader()"
                class="absolute top-8 right-8 z-[10] w-12 h-12 flex items-center justify-center rounded-full bg-black text-white hover:scale-110 active:scale-95 transition-all">
                <i class="fa-solid fa-xmark text-lg"></i>
            </button>
            <div class="overflow-y-auto p-12 md:p-20 h-full no-scrollbar">
                <div id="modal-article-content" class="max-w-2xl mx-auto"></div>
            </div>
        </div>
    </div>

    <script src="updatenotes.js"></script>
    <script>
        let selectedTags = new Set();
        let searchQuery = '';
        let DEFAULT_BLOGS = [];

        async function loadBlogs() {
            try {
                const response = await fetch('data/blogs.json');
                DEFAULT_BLOGS = await response.json();
                renderBlogs();
                renderTagCloud();
            } catch (e) {
                console.error("Failed to load blogs.json", e);
            }
        }

        function handleSearch() {
            searchQuery = document.getElementById('article-search').value.toLowerCase();
            renderBlogs();
        }

        function toggleTag(tag) {
            if (selectedTags.has(tag)) {
                selectedTags.delete(tag);
            } else {
                selectedTags.add(tag);
            }
            renderBlogs();
            renderTagCloud();
        }

        function renderTagCloud() {
            const cloud = document.getElementById('tag-cloud');
            if (!cloud) return;

            const tags = [
                { name: 'Architecture', color: 'blue' },
                { name: 'Core Logic', color: 'red' },
                { name: 'UX/Design', color: 'emerald' },
                { name: 'Hardware', color: 'amber' }
            ];

            cloud.innerHTML = tags.map(tag => {
                const isActive = selectedTags.has(tag.name);
                const colorMap = { blue: 'bg-sage/10 text-moss', red: 'bg-red-50 text-red-500', emerald: 'bg-emerald-50 text-emerald-500', amber: 'bg-amber-50 text-amber-500' };
                const activeColorMap = { blue: 'bg-moss text-paper', red: 'bg-red-500 text-white', emerald: 'bg-emerald-500 text-white', amber: 'bg-amber-500 text-white' };

                return `
                    <button onclick="toggleTag('${tag.name}')" 
                        class="px-6 py-2.5 rounded-full text-[10px] uppercase tracking-widest font-bold transition-all ${isActive
                        ? `${activeColorMap[tag.color]} shadow-md scale-105`
                        : `${colorMap[tag.color]} dark:bg-sage/5 dark:text-sage/60 hover:bg-paper dark:hover:bg-obsidian`
                    }">
                        ${tag.name}
                    </button>
                `;
            }).join('');
        }

        function renderBlogs() {
            const feed = document.getElementById('article-feed');
            if (!feed) return;

            const customBlogs = JSON.parse(localStorage.getItem('olm_blogs') || '[]');
            const blogMap = new Map();
            [...DEFAULT_BLOGS, ...customBlogs].forEach(blog => blogMap.set(blog.id, blog));
            const allBlogs = Array.from(blogMap.values()).reverse();

            const filteredLines = allBlogs.filter(blog => {
                const matchesSearch = blog.title.toLowerCase().includes(searchQuery) ||
                    (blog.content && blog.content.toLowerCase().includes(searchQuery));

                const blogTags = (blog.tags || []).map(t => typeof t === 'string' ? t : t.name);
                const matchesTags = selectedTags.size === 0 || Array.from(selectedTags).every(t => blogTags.includes(t));

                return matchesSearch && matchesTags;
            });

            if (filteredLines.length === 0) {
                feed.innerHTML = `
                    <div class="py-32 text-center animate-fade-in">
                        <p class="text-gray-400 text-lg font-medium">No papers found matching your search.</p>
                    </div>
                `;
                return;
            }

            feed.innerHTML = filteredLines.map((blog, i) => {
                const tagsRaw = blog.tags || [{ name: blog.category || 'Research', color: 'blue' }];
                const tagsHtml = tagsRaw.map(t => {
                    const tagObj = typeof t === 'string' ? { name: t, color: 'blue' } : t;
                    const colorMap = { blue: 'text-blue-500', red: 'text-red-500', green: 'text-emerald-500', amber: 'text-amber-500' };
                    return `<span class="text-[11px] font-black uppercase tracking-[0.2em] ${colorMap[tagObj.color] || 'text-blue-500'}">${tagObj.name}</span>`;
                }).join('');

                return `
                    <article class="bg-paper/60 dark:bg-obsidian/40 backdrop-blur-xl rounded-[32px] p-10 border border-moss/10 dark:border-sage/10 shadow-sm hover:shadow-md transition-all cursor-pointer group animate-fade-in" 
                        style="animation-delay: ${i * 0.1}s" 
                        onclick="openReader('${blog.id}')">
                        <div class="flex items-center justify-between mb-6">
                            <div class="flex gap-4">
                                ${tagsHtml}
                            </div>
                            <span class="text-[10px] font-bold uppercase tracking-[0.1em] text-stone-400">${blog.date || 'RECENT'}</span>
                        </div>
                        <h2 class="serif-text text-3xl font-medium tracking-tight text-moss dark:text-sage mb-6 group-hover:text-moss dark:group-hover:text-sage transition-colors leading-tight">${blog.title}</h2>
                        <div class="rich-content line-clamp-3 text-stone-500 dark:text-stone-400 text-lg font-normal mb-10">
                            ${stripHtml(blog.content)}
                        </div>
                        <div class="flex items-center gap-3 text-moss dark:text-sage font-bold text-[10px] uppercase tracking-widest">
                            <span>Read Paper</span>
                            <div class="w-8 h-8 rounded-full bg-moss dark:bg-sage text-paper dark:text-obsidian flex items-center justify-center group-hover:translate-x-1 transition-transform">
                                <i class="fa-solid fa-arrow-right text-[10px]"></i>
                            </div>
                        </div>
                    </article>
                `;
            }).join('');
        }

        function stripHtml(html) {
            let tmp = document.createElement("DIV");
            tmp.innerHTML = html;
            return tmp.textContent || tmp.innerText || "";
        }

        function openReader(id) {
            const customBlogs = JSON.parse(localStorage.getItem('olm_blogs') || '[]');
            const allBlogs = [...customBlogs, ...DEFAULT_BLOGS];
            const blog = allBlogs.find(b => b.id === id);

            if (!blog) return;

            const tagsRaw = blog.tags || [{ name: blog.category || 'Research', color: 'blue' }];
            const tagsHtml = tagsRaw.map(t => {
                const tagObj = typeof t === 'string' ? { name: t, color: 'blue' } : t;
                const colorMap = { blue: 'text-blue-500', red: 'text-red-500', green: 'text-emerald-500', amber: 'text-amber-500' };
                return `<span class="text-[11px] font-black uppercase tracking-[0.2em] ${colorMap[tagObj.color] || 'text-blue-500'}">${tagObj.name}</span>`;
            }).join('');

            const contentHtml = `
                <div class="flex gap-4 mb-8">${tagsHtml}</div>
                <div class="text-[10px] font-bold text-stone-400 mb-6 uppercase tracking-widest">${blog.date || 'RECENT'}</div>
                <h1 class="serif-text text-5xl md:text-6xl font-medium tracking-tight text-moss dark:text-sage mb-12 leading-[1.1]">${blog.title}</h1>
                <div class="rich-content text-xl leading-relaxed text-stone-600 dark:text-stone-300 font-normal">
                    ${blog.content}
                </div>
            `;

            document.getElementById('modal-article-content').innerHTML = contentHtml;
            const modal = document.getElementById('reader-modal');
            modal.style.display = 'flex';
            setTimeout(() => modal.classList.add('active'), 10);
            document.body.style.overflow = 'hidden';

            modal.onclick = (e) => {
                if (e.target === modal) closeReader();
            };
        }

        function closeReader() {
            const modal = document.getElementById('reader-modal');
            modal.classList.remove('active');
            setTimeout(() => {
                modal.style.display = 'none';
                document.body.style.overflow = '';
            }, 600);
        }

        loadBlogs();


        window.addEventListener('storage', (e) => {
            if (e.key === 'olm_blogs') {
                renderBlogs();
            }
        });
    </script>
</body>

</html>